{>page/}
{<page_script}
<script src="script/core.js" type="text/javascript"></script>
   <script src="script/ajax.js" type="text/javascript"></script>
   <script src="script/dom.js" type="text/javascript"></script>
   <script type="text/javascript">
      function removePost() {
         if(!window.confirm('Are you sure?')) return false;
         sps.AJAX.delete({this.href,
            onSuccess: function(data) {
               alert('Deleted Successful!')
            },
            onError: function(data) {alert('Problem!')}
         });
      };
      function init() {
         var elements = document.getElementsByClassName('delete');
         for (var i = 0; i < elements.length; i++) {
            elements[i].addEventListener("click", removePost, false);
         }
      };
      document.onreadystatechange = function () {
         if (document.readyState == "complete") {
            init();
         }
      }
   </script>
   {/page_script}
   {<content}
      <div class="border body">
         <a href="/posts/add">Add Post</a>
         <div class="column">
            <table>
               <thead>
                  <tr>
                     <th scope="col">Title</th>
                     <th scope="col">Date</th>
                     <th scope="col">Content</th>
                  </tr>
               </thead>
               <col id="title"/>
               <col id="date"/>
               <tbody>
                  {#posts}
                  <tr>
                     <td>
                        {title}
                     </td>
                     <td>
                        <time datetime="{date}" class="byline"><{date}></time>
                     </td>
                     <td>
                        {content}
                     </td>
                     <td>
                        <a href="/posts/{key}/edit">Edit</a>
                     </td>
                     <td>
                        <a href="/posts/{key}" class="delete">Delete</a>                        
                     </td>
                  </tr>
                  {/posts}
               </tbody>
            </table>
         </div>
      </div>
      {/content}