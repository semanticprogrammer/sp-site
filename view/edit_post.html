{>page/}
{<page_script}
   <script src="/script/core.js" type="text/javascript"></script>
   <script src="/script/ajax.js" type="text/javascript"></script>
   <script src="/script/dom.js" type="text/javascript"></script>
   <script type="text/javascript">
      function updatePost(url) {
         sps.AJAX.put({
            url: url,
            content: sps.Controls.toObject(),
            onSuccess: function(data) {
               alert('Update Successful!')
            },
            onError: function(data) {alert('Problem!')}
         });
      };
   </script>
   {/page_script}
   {<content}
      <div class="border body">
         {#currentEntity source="posts"}      
         <form action="/posts/{.key}" method="put">
            <header>
               <h3>Edit Post</h3>
            </header>
            <label for="key">Key:</label>
            <input id="key" name="key" type="text" value="{.key}" readonly/>
            <label for="title">Title:</label>
            <input id="title" name="title" type="text" value="{.title}"/>
            <label for="date">Date:</label>
            <input id="date" name="date" type="text" value="{.date}"/>
            <textarea name="content" rows="3" colums="20" max-length="140" wrap="soft">{.content}</textarea>       
            <button onclick="updatePost('/posts/{.key}')" type="button">Save</button>
         </form>
         {/currentEntity}         
      </div>
      {/content}